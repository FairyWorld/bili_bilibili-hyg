# bilibili-hyg
bilibili 会员购 抢票脚本

PS: 在branch refactor-ref 中有新的版本，各位大佬可以先行做个测试，稍后我将合并到主分支

**恳请各位大佬点个免费的星星⭐️支持一下鸭**

*感谢B站大佬 @某科学的纪元之光 的转载*

本脚本不同于其他脚本，直接调用api，存在一定风控风险，脚本提供者不为您的行为负责。

本脚本仅供学习交流，请在24小时内停止运行并删除本脚本。

**常见问题请参考[FAQ Wiki](https://github.com/ZianTT/bilibili-hyg/wiki/FAQ)**

PS：针对GeeTest验证码我也没有什么好的解决方案，如果有xd有GeeTest的能用的现成轮子欢迎推荐给我吖

## 依赖安装

首先，克隆本仓库或者下载 main.py 文件。

本脚本基于Python编写，需要Python3来运行。运行前需要`requests`库支持。您可以使用以下代码安装

（可选）若无pip管理器，即“pip不是或外部命令，也不是可运行的程序或批处理文件。”等情况，运行以下命令安装（仅新版本）

```shell
python3 -m ensurepip --upgrade
```

之后可重启cmd/终端。还仍无pip，请确认“系统属性环境变量”中Path中包含“【你的Python安装目录】/Scripts”。

```shell
pip3 install requests
```

之后可以直接运行

```shell
python3 main.py
```

## 使用教程

登录 show.bilibili.com ，F12打开浏览器开发者工具，选择Network(网络)选项卡，~~选一个看着像的~~点开，在标头(Header)选项卡中找到请求标头中的Cookie，整行复制并按提示输入。

项目id则为活动详情页url中id的参数，一般为7开头的数字，如BW2023为73710

接下来根据提示选择场次，购票人（购买单场次多张票可多选购票人，格式：0,1）

触发风控时，请访问给出的链接人工验证，完成验证后按下回车继续

若抢票成功，可在任何一端访问订单页支付，防止放票

如有侵权请联系删除

## 参数公示

售票状态及票数刷新间隔：(0.3+0.1[请求延时])秒

下单token刷新：不定时，约 (0.3+0.1)*800/2=120秒

下订单刷新：不定时，约0.1s[请求延时]秒

有票后下订单总次数：20次
